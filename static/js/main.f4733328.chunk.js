(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70",textGray:"#999999",textLight:"#cccccc"}},,,,,,,function(e,t,a){e.exports=a(41)},,,,,function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70",textGray:"#999999",textLight:"#cccccc"}},,,function(e,t,a){},function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70",textGray:"#999999",textLight:"#cccccc"}},function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70",textGray:"#999999",textLight:"#cccccc"}},,,function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70",textGray:"#999999",textLight:"#cccccc"}},function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70",textGray:"#999999",textLight:"#cccccc"}},,,,,function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70",textGray:"#999999",textLight:"#cccccc"}},function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70",textGray:"#999999",textLight:"#cccccc"}},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(15),c=a.n(i),o=a(3),l=(a(23),a(4)),s=a.n(l),u=a(6),m=[{name:"Movie",exportName:"movie"},{name:"TV Movie",exportName:"tvMovie"},{name:"Series",exportName:"tvSeries"},{name:"Mini Series",exportName:"tvMiniSeries"},{name:"Episode",exportName:"tvEpisode"},{name:"Video",exportName:"video"},{name:"Short",exportName:"short"},{name:"TV Short",exportName:"tvShort"},{name:"TV Special",exportName:"tvSpecial"},{name:"Video Game",exportName:"videoGame"}],d="***";function p(e){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:return a=e.sent,e.abrupt("return",v(a));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e){return new Promise(function(t,a){var n=new FileReader;n.onloadend=function(e){var a=e.target.result;t(a)},n.onerror=function(e){a(e)},n.readAsText(e,"Windows-1252")})}function v(e){var t=function(e){return function(e){return e.replace("Const,","id,").replace("Your Rating,","rating,").replace("Title,","title,").replace("Date Rated,","dateRatedString,").replace("Genres,","genres,").replace("Title Type,","mediaType,").replace("Num Votes,","votes,").replace("Runtime (mins),","runtime,").replace("Release Date,","releaseDate,").replace("URL,","url,").replace("Year,","year,").replace("IMDb Rating,","imdbRating,").replace(",Directors",",directors")}(e).replace(/"[^"]+"/g,function(e){return e.replace(/,/g,"###")}).replace(/,/g,d).replace(/###/g,",").replace(/"/g,"")}(e).split("\n");console.log(t[0]);var a,n=[],r=t[0].split(d);return t.map(function(e,t){if(t<1)return n;var a={},i=e.split(d);return r.map(function(e,t){return a[e]=i[t],a}),n.push(a),n}),n.pop(),(a=n).map(function(e){var t=m.findIndex(function(t){return t.exportName===e.mediaType});return e.rating=parseInt(e.rating),e.runtime=parseInt(e.runtime),e.votes=parseInt(e.votes),e.year=parseInt(e.year),e.imdbRating=parseFloat(e.imdbRating),e.dateRated=new Date(e.dateRatedString),e.mediaTypeId=t,e.mediaType=m[t].name,e.genres=e.genres.split(", "),e.directors=e.directors.split(", "),e.deviation=parseFloat((e.rating-e.imdbRating).toFixed(1)),e}),n=a,console.log(n),n}var h=a(10);var x=function(e){var t=Object(h.a)(new Set(e.map(function(e){return e.mediaTypeId})));return t=t.sort()},y=(a(26),function(e){var t=e.setLoaded,a=e.setRatings,n=e.setLoadedMediaTypes,i=function(){var e=Object(u.a)(s.a.mark(function e(){var r,i,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.getElementById("fileUpload").files[0],e.next=3,p(r);case 3:i=e.sent,c=x(i),console.log(c),a(i),n(c),t(!0),sessionStorage.setItem("ratings",JSON.stringify(i)),sessionStorage.setItem("mediaTypes",c);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"uploader"},r.a.createElement("h1",null,"Upload IMDb Ratings CSV"),r.a.createElement("input",{type:"file",id:"fileUpload",onChange:i}))}),b=(a(27),function(){return r.a.createElement("div",{className:"title-bar"},r.a.createElement("span",{className:"app-name"},"IMDb Ratings Visualizer"))}),E=(a(28),a(43)),w=a(17),N=(a(31),r.a.createElement("span",null,r.a.createElement("span",{style:{verticalAlign:"middle"}},"Next"),r.a.createElement("i",{className:"material-icons pagination-icon"},"keyboard_arrow_right"))),k=r.a.createElement("span",null,r.a.createElement("i",{className:"material-icons pagination-icon left-pagination-icon"},"keyboard_arrow_left"),r.a.createElement("span",null,"Previous")),S=function(e){var t=e.data,a=e.columns,n=e.defaultSorted,i=e.defaultPageSize;return r.a.createElement(w.a,{data:t,columns:a,className:"-striped -highlight",defaultSorted:n,defaultPageSize:i,pageSizeOptions:[5,10,15,25,50,100,250,1e3],nextText:N,previousText:k,minRows:0})};a(32);var R=function(e){return r.a.createElement("a",{href:e,target:"_blank",className:"material-icons imdb-link",rel:"noreferrer noopener"},"open_in_new")},O=function(e){var t=e.ratings,a=[{Header:"",accessor:"url",Cell:function(e){var t=e.row;return R(t.url)},maxWidth:64,className:"cell-center"},{Header:"Title",accessor:"title"},{Header:"Rating",accessor:"rating",maxWidth:150,className:"cell-center"},{Header:"Type",accessor:"mediaType",maxWidth:150,className:"cell-center"},{Header:"Rated",accessor:"dateRatedString",maxWidth:150,className:"cell-center"},{Header:"Year",accessor:"year",maxWidth:150,className:"cell-center"}];return r.a.createElement("div",{className:"main-component",style:{padding:40}},r.a.createElement(S,{data:t,columns:a,defaultSorted:[{id:"rating",desc:!0}],defaultPageSize:50}))},T=a(8),j=a.n(T),I=a(11),D=a.n(I),M={textGray:D.a.textGray,textLight:D.a.textLight,creamYellow:D.a.creamYellow},Y=function(e){var t=e.title,a=e.categories,n=e.data,i=e.dataCount,c=e.seriesName,o=e.height,l=e.width,s={colors:[M.creamYellow],plotOptions:{bar:{dataLabels:{position:"top"},distributed:!0,colors:{backgroundBarOpacity:1}}},dataLabels:{offsetY:-22,enabled:!0,formatter:function(e){return e>0?Math.round(e/i*100)+"%":""},style:{fontSize:"12px",colors:[M.creamYellow]}},xaxis:{categories:a,labels:{style:{colors:M.textGray,fontSize:"15px"}}},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.4,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[50,100]}},title:{text:t,floating:!0,align:"center",style:{color:M.textLight,fontSize:"22px"}},tooltip:{theme:"dark",x:{show:!1}},grid:{show:!1},chart:{toolbar:{tools:{download:!1}}}},u=[{name:c,data:n}];return r.a.createElement("div",{className:"chart-container"},r.a.createElement(j.a,{options:s,series:u,type:"bar",height:o,width:l}))},F=function(e){var t=e.ratingsData,a=e.ratingsCount;return r.a.createElement(Y,{title:"Ratings per Stars",categories:["1","2","3","4","5","6","7","8","9","10"],data:t,dataCount:a,seriesName:"Ratings",height:350,width:600})};a(37);var C=function(e){var t=e.description,a=e.value;return r.a.createElement("tr",null,r.a.createElement("td",{className:"info-value"},a),r.a.createElement("td",{className:"info-key"},t))},L=function(e){var t=e.ratings,a=e.ratingsCount,n=function(e,t){var a=e.reduce(function(e,t){return e+(t.rating||0)},0),n=parseFloat((a/t).toFixed(1)),r=e.reduce(function(e,t){return e+(t.imdbRating||0)},0),i=parseFloat((r/t).toFixed(1)),c=e.reduce(function(e,t){return e+(t.runtime||0)},0);return[n,i,parseFloat((c/60/24).toFixed(1))]}(t,a),i=Object(o.a)(n,3),c=i[0],l=i[1],s=i[2];return r.a.createElement("div",{className:"chart-container"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement(C,{description:"ratings",value:a}),r.a.createElement(C,{description:"your avg rating",value:c}),r.a.createElement(C,{description:"public avg rating",value:l}),r.a.createElement(C,{description:"days watched",value:s}))))},W=(a(38),function(e){for(var t=e.map(function(e){return e.rating}),a=Array(10).fill(0),n=0;n<t.length;n++){var r=t[n]-1;a[r]=a[r]?a[r]+1:1}return a}),G=function(e){var t=e.ratings,a=t.length;return r.a.createElement("div",{className:"main-component"},r.a.createElement(L,{ratings:t,ratingsCount:a}),r.a.createElement(F,{ratingsData:W(t),ratingsCount:a}))},B=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];var H=function(e){var t=e.ratings,a=t.length,n=function(e){var t=e.reduce(function(e,t){return e[t.dateRated.getDay()]++,e},[0,0,0,0,0,0,0]);return t.push(t.shift()),t}(t);return console.log("ratingsPerWeekday =>",n),r.a.createElement("div",null,r.a.createElement(Y,{title:"Ratings per Weekday",categories:B,data:n,dataCount:a,seriesName:"Weekday",width:600,height:350}))};var z=function(e){var t=e.ratings,a=t.length,n=function(e){var t=Object(h.a)(new Set(e.map(function(e){return e.dateRated.getFullYear()})));return t.sort(),t}(t),i=function(e,t){for(var a=e.map(function(e){return e.dateRated.getFullYear()}),n=Array(t).fill(0),r=0;r<a.length;r++){var i=a[r],c=t.indexOf(i);n[c]=n[c]?n[c]+1:1}return n}(t,n);return r.a.createElement(Y,{title:"Ratings per Year",categories:n,data:i,dataCount:a,seriesName:"Year",width:600,height:350})},_=function(e){var t=e.title,a=e.categories,n=e.columnName,i=e.columnData,c=e.lineName,o=e.lineData,l=e.height,s=e.width,u={stroke:{width:[0,4]},title:{text:t,floating:!0,align:"center",style:{color:"#ffffff"}},labels:a,yaxis:[{title:{text:n},decimalsInFloat:0},{opposite:!0,title:{text:c},decimalsInFloat:1}],grid:{yaxis:{lines:{show:!1}}},chart:{toolbar:{tools:{download:!1}}},tooltip:{theme:"dark"}},m=[{name:n,type:"column",data:i},{name:c,type:"line",data:o}];return r.a.createElement("div",{className:"chart-container"},r.a.createElement(j.a,{series:m,options:u,type:"line",height:l,width:s}))};function A(e){return 10*Math.floor(e/10)}var P=function(e){var t=e.ratings,a=function(){for(var e=new Date,t=[],a=1870;a<=A(e.getFullYear());a+=10)t.push(a);return t}();console.log("decades =>",a);var n=function(e,t){for(var a=t.length,n=Array(a).fill(0),r=Array(a).fill(0),i=0;i<e.length;i++){var c=e[i].rating,o=A(e[i].year),l=t.indexOf(o);n[l]=n[l]+1,r[l]=r[l]+c}for(var s=0;s<r.length;s++)r[s]=r[s]?parseFloat((r[s]/n[s]).toFixed(1)):0;return console.log("counts =>",n),console.log("avgRating =>",r),[n,r]}(t,a),i=Object(o.a)(n,2),c=i[0],l=i[1];return r.a.createElement("div",null,r.a.createElement(_,{title:"Ratings per Decade",categories:a,columnName:"Amount of Ratings",columnData:c,lineName:"Average Rating",lineData:l,width:1200,height:378}))},V=function(e){var t=e.ratings;return r.a.createElement("div",{className:"main-component"},r.a.createElement(H,{ratings:t}),r.a.createElement(z,{ratings:t}),r.a.createElement(P,{ratings:t}))};var J=function(e){return r.a.createElement("div",{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",cursor:"text"}},r.a.createElement("span",{title:e},e))};a(39);var U=[{name:"Dashboard",icon:"bubble_chart",path:"/",component:G},{name:"Ratings",icon:"list",path:"/ratings",component:O},{name:"Time",icon:"calendar_today",path:"/time",component:V},{name:"Deviations",icon:"call_split",path:"/deviations",component:function(e){var t=function(e){var t=e.filter(function(e){return e.deviation>0}),a=e.filter(function(e){return e.deviation<0});return t.sort(function(e,t){return t.deviation-e.deviation}),a.sort(function(e,t){return e.deviation-t.deviation}),[t,a]}(e.ratings),a=Object(o.a)(t,2),n=a[0],i=a[1];console.log("positives =>",n),console.log("negatives =>",i);var c=[{Header:"",accessor:"url",Cell:function(e){var t=e.row;return R(t.url)},maxWidth:64,className:"cell-center"},{Header:"Title",accessor:"title",Cell:function(e){var t=e.row;return J(t.title)}},{Header:"Rating",accessor:"rating",maxWidth:100,className:"cell-center"},{Header:"IMDb",accessor:"imdbRating",maxWidth:100,className:"cell-center"},{Header:"Deviation",accessor:"deviation",maxWidth:100,className:"cell-center"}];return r.a.createElement("div",{className:"main-component"},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"deviation-table"},r.a.createElement("h3",null,"Positive"),r.a.createElement(S,{data:n,columns:c,defaultPageSize:15})),r.a.createElement("div",{className:"deviation-table"},r.a.createElement("h3",null,"Negative"),r.a.createElement(S,{data:i,columns:c,defaultPageSize:15}))))}}],$=function(){var e=Object(n.useState)(function(e){console.log(e);var t=e.find(function(e){var t=window.location.href.substr(window.location.href.lastIndexOf("/"));return e.path===t});return console.log("currentRoute =>",t),t.name}(U)),t=Object(o.a)(e,2),a=t[0],i=t[1];return U?r.a.createElement("div",null,U.map(function(e){return r.a.createElement("div",{key:e.name},r.a.createElement(E.a,{to:e.path,className:"sidebar-link"},r.a.createElement("div",{className:(t=e.name,a===t?"active-tab":"")},r.a.createElement("div",{onClick:function(){return i(e.name)},className:"sidebar-box"},r.a.createElement("i",{className:"material-icons sidebar-icon"},e.icon),r.a.createElement("span",{className:"sidebar-text"},e.name)))));var t})):"Loading"},q=function(e){var t=e.id,a=e.name,n=e.checked,i=e.onChange;return r.a.createElement("label",{className:"filter-checkbox-label"},r.a.createElement("input",{type:"checkbox",className:"custom-checkbox",value:t,name:a,checked:n,onChange:i}),r.a.createElement("span",{className:"checkmark"}),a)},K=function(e){var t=e.loadedMediaTypes,a=e.filterMovies,i=t.map(function(e){return[e,!0]}),c=Object(n.useState)(1),l=Object(o.a)(c,2),s=l[0],u=l[1],d=Object(n.useState)(new Map(i)),p=Object(o.a)(d,2),f=p[0],g=p[1],v=function(e){var t=parseInt(e.target.value),n=e.target.checked;g(f.set(t,n)),u(s+1),a(f)};return r.a.createElement("div",{className:"sidebar"},r.a.createElement($,null),r.a.createElement("div",null,r.a.createElement("h3",{className:"filter-heading"},"Filter"),f?t.map(function(e){return r.a.createElement(q,{key:e,id:e,name:m[e].name,checked:f.get(e),onChange:v})}):"loading"))},Q=a(44),X=a(45);function Z(){return(Z=Object(u.a)(s.a.mark(function e(t,a,n){var r,i,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=sessionStorage.getItem("ratings"))){e.next=12;break}return e.next=4,JSON.parse(r);case 4:return i=e.sent,e.next=7,ee(i);case 7:c=e.sent,t(c),console.log(c),a(sessionStorage.getItem("mediaTypes").split(",").map(function(e){return parseInt(e)})),n(!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.map(function(e){return e.dateRated=new Date(e.dateRated),e}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ae=function(e,t,a){return Z.apply(this,arguments)},ne=function(e){var t=e.ratings,a=e.loadedMediaTypes,i=Object(n.useState)(t),c=Object(o.a)(i,2),l=c[0],s=c[1],u=U.map(function(e){var t=e.path,a=e.component,n=e.name;return"/"===t?r.a.createElement(X.a,{exact:!0,path:t,render:function(){return r.a.createElement(a,{ratings:l})},key:n}):r.a.createElement(X.a,{path:t,render:function(){return r.a.createElement(a,{ratings:l})},key:n})});return r.a.createElement("div",null,r.a.createElement(K,{loadedMediaTypes:a,filterMovies:function(e){var a=t.filter(function(t){return!0===e.get(t.mediaTypeId)});s(a)}}),u)},re=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(),l=Object(o.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(),d=Object(o.a)(m,2),p=d[0],f=d[1];return Object(n.useEffect)(function(){a||ae(u,f,i)},[a]),r.a.createElement("div",{className:"App"},r.a.createElement(b,null),r.a.createElement("div",{className:"main-content"},a?r.a.createElement(Q.a,null,r.a.createElement(ne,{ratings:s,loadedMediaTypes:p})):r.a.createElement(y,{setLoaded:i,setRatings:u,setLoadedMediaTypes:f})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[18,1,2]]]);
//# sourceMappingURL=main.f4733328.chunk.js.map