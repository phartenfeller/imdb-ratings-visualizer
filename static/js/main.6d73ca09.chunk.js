(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(41)},23:function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70"}},26:function(e,t,a){},27:function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70"}},28:function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70"}},31:function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70"}},38:function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70"}},39:function(e,t,a){e.exports={colorBlack:"black",creamYellow:"#ffee70"}},41:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(14),o=a.n(i),c=a(4),l=(a(23),a(6)),s=a.n(l),u=a(8),m=[{name:"Movie",exportName:"movie"},{name:"TV Movie",exportName:"tvMovie"},{name:"Series",exportName:"tvSeries"},{name:"Mini Series",exportName:"tvMiniSeries"},{name:"Episode",exportName:"tvEpisode"},{name:"Video",exportName:"video"},{name:"Short",exportName:"short"},{name:"TV Short",exportName:"tvShort"},{name:"TV Special",exportName:"tvSpecial"},{name:"Video Game",exportName:"videoGame"}],d="***";function p(e){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:return a=e.sent,e.abrupt("return",v(a));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e){return new Promise(function(t,a){var n=new FileReader;n.onloadend=function(e){var a=e.target.result;t(a)},n.onerror=function(e){a(e)},n.readAsText(e,"Windows-1252")})}function v(e){var t=function(e){return function(e){return e.replace("Const,","id,").replace("Your Rating,","rating,").replace("Title,","title,").replace("Date Rated,","dateRatedString,").replace("Genres,","genres,").replace("Title Type,","mediaType,").replace("Num Votes,","votes,").replace("Runtime (mins),","runtime,").replace("Release Date,","releaseDate,").replace("URL,","url,").replace("Year,","year,").replace("IMDb Rating,","imdbRating,").replace(",Directors",",directors")}(e).replace(/"[^"]+"/g,function(e){return e.replace(/,/g,"###")}).replace(/,/g,d).replace(/###/g,",").replace(/"/g,"")}(e).split("\n");console.log(t[0]);var a,n=[],r=t[0].split(d);return t.map(function(e,t){if(t<1)return n;var a={},i=e.split(d);return r.map(function(e,t){return a[e]=i[t],a}),n.push(a),n}),n.pop(),(a=n).map(function(e){var t=m.findIndex(function(t){return t.exportName===e.mediaType});return e.rating=parseInt(e.rating),e.runtime=parseInt(e.runtime),e.votes=parseInt(e.votes),e.year=parseInt(e.year),e.imdbRating=parseFloat(e.imdbRating),e.dateRated=new Date(e.dateRatedString),e.mediaTypeId=t,e.mediaType=m[t].name,e.genres=e.genres.split(", "),e.directors=e.directors.split(", "),e}),n=a,console.log(n),n}var h=a(11);var b=function(e){var t=Object(h.a)(new Set(e.map(function(e){return e.mediaTypeId})));return t=t.sort()},E=(a(26),function(e){var t=e.setLoaded,a=e.setRatings,n=e.setLoadedMediaTypes,i=function(){var e=Object(u.a)(s.a.mark(function e(){var r,i,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.getElementById("fileUpload").files[0],e.next=3,p(r);case 3:i=e.sent,o=b(i),console.log(o),a(i),n(o),t(!0),sessionStorage.setItem("ratings",JSON.stringify(i)),sessionStorage.setItem("mediaTypes",o);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"uploader"},r.a.createElement("h1",null,"Upload IMDb Ratings CSV"),r.a.createElement("input",{type:"file",id:"fileUpload",onChange:i}))}),y=(a(27),function(){return r.a.createElement("div",{className:"title-bar"},r.a.createElement("span",{className:"app-name"},"IMDb Ratings Visualizer"))}),w=(a(28),a(42)),x=a(16),N=(a(31),function(e){var t=e.ratings,a=r.a.createElement("span",null,r.a.createElement("span",{style:{verticalAlign:"middle"}},"Next"),r.a.createElement("i",{className:"material-icons pagination-icon"},"keyboard_arrow_right")),n=r.a.createElement("span",null,r.a.createElement("i",{className:"material-icons pagination-icon left-pagination-icon"},"keyboard_arrow_left"),r.a.createElement("span",null,"Previous"));return r.a.createElement(x.a,{data:t,columns:[{Header:"ID",accessor:"id"},{Header:"Title",accessor:"title"},{Header:"Rating",accessor:"rating"},{Header:"Type",accessor:"mediaType"},{Header:"Date Rated",accessor:"dateRatedString"},{Header:"Genres",accessor:"genres"}],className:"-striped -highlight main-component",defaultSorted:[{id:"rating",desc:!0}],defaultPageSize:50,pageSizeOptions:[5,10,20,25,50,100,250,1e3],nextText:a,previousText:n,minRows:0})}),k=a(9),F=a.n(k),R=["#FF355E","#FD5B78","#FF6037","#FF9933","#FFCC33","#FFFF66","#CCFF00","#66FF66","#50BFE6","#FF00CC"],S=function(e){var t=e.title,a=e.categories,n=e.data,i=e.dataCount,o=e.seriesName,c=e.height,l=e.width,s={colors:R,plotOptions:{bar:{dataLabels:{position:"top"},distributed:!0,colors:{backgroundBarOpacity:1}}},dataLabels:{enabled:!0,formatter:function(e){return Math.round(e/i*100)+"%"},style:{fontSize:"12px",colors:["#ffffff"]}},xaxis:{categories:a,labels:{style:{colors:R}}},title:{text:t,floating:!0,align:"center",style:{color:"#ffffff"}},tooltip:{x:{show:!1}},grid:{show:!1},chart:{toolbar:{tools:{download:!1}}}},u=[{name:o,data:n}];return r.a.createElement("div",{className:"chart-container"},r.a.createElement(F.a,{options:s,series:u,type:"bar",height:c,width:l}))},O=function(e){var t=e.ratingsData,a=e.ratingsCount;return r.a.createElement(S,{title:"Ratings per Stars",categories:["1","2","3","4","5","6","7","8","9","10"],data:t,dataCount:a,seriesName:"Ratings",height:350,width:600})};a(38);var T=function(e){var t=e.description,a=e.value;return r.a.createElement("tr",null,r.a.createElement("td",{className:"info-value"},a),r.a.createElement("td",{className:"info-key"},t))},j=function(e){var t=e.ratings,a=e.ratingsCount,n=function(e,t){var a=e.reduce(function(e,t){return e+(t.rating||0)},0),n=parseFloat((a/t).toFixed(1)),r=e.reduce(function(e,t){return e+(t.imdbRating||0)},0),i=parseFloat((r/t).toFixed(1)),o=e.reduce(function(e,t){return e+(t.runtime||0)},0);return[n,i,parseFloat((o/60/24).toFixed(1))]}(t,a),i=Object(c.a)(n,3),o=i[0],l=i[1],s=i[2];return r.a.createElement("div",{className:"chart-container"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement(T,{description:"ratings",value:a}),r.a.createElement(T,{description:"your avg rating",value:o}),r.a.createElement(T,{description:"public avg rating",value:l}),r.a.createElement(T,{description:"days watched",value:s}))))},I=(a(39),function(e){for(var t=e.map(function(e){return e.rating}),a=Array(10).fill(0),n=0;n<t.length;n++){var r=t[n]-1;a[r]=a[r]?a[r]+1:1}return a}),D=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];var C=function(e){var t=e.ratings,a=t.length,n=function(e){var t=e.reduce(function(e,t){return e[t.dateRated.getDay()]++,e},[0,0,0,0,0,0,0]);return t.push(t.shift()),t}(t);return console.log("ratingsPerWeekday =>",n),r.a.createElement("div",null,r.a.createElement(S,{title:"Ratings per Weekday",categories:D,data:n,dataCount:a,seriesName:"Weekday",width:600,height:350}))};var M=function(e){var t=e.ratings,a=t.length,n=function(e){var t=Object(h.a)(new Set(e.map(function(e){return e.dateRated.getFullYear()})));return t.sort(),t}(t),i=function(e,t){for(var a=e.map(function(e){return e.dateRated.getFullYear()}),n=Array(t).fill(0),r=0;r<a.length;r++){var i=a[r],o=t.indexOf(i);n[o]=n[o]?n[o]+1:1}return n}(t,n);return r.a.createElement(S,{title:"Ratings per Year",categories:n,data:i,dataCount:a,seriesName:"Year",width:600,height:350})},Y=function(e){var t=e.title,a=e.categories,n=e.columnName,i=e.columnData,o=e.lineName,c=e.lineData,l=e.height,s=e.width,u={stroke:{width:[0,4]},title:{text:t,floating:!0,align:"center",style:{color:"#ffffff"}},labels:a,yaxis:[{title:{text:n},decimalsInFloat:0},{opposite:!0,title:{text:o},decimalsInFloat:1}],grid:{yaxis:{lines:{show:!1}}},chart:{toolbar:{tools:{download:!1}}}},m=[{name:n,type:"column",data:i},{name:o,type:"line",data:c}];return r.a.createElement("div",{className:"chart-container"},r.a.createElement(F.a,{series:m,options:u,type:"line",height:l,width:s}))};function B(e){return 10*Math.floor(e/10)}var A=function(e){var t=e.ratings,a=function(){for(var e=new Date,t=[],a=1870;a<=B(e.getFullYear());a+=10)t.push(a);return t}();console.log("decades =>",a);var n=function(e,t){for(var a=t.length,n=Array(a).fill(0),r=Array(a).fill(0),i=0;i<e.length;i++){var o=e[i].rating,c=B(e[i].year),l=t.indexOf(c);n[l]=n[l]+1,r[l]=r[l]+o}for(var s=0;s<r.length;s++)r[s]=r[s]?parseFloat((r[s]/n[s]).toFixed(1)):0;return console.log("counts =>",n),console.log("avgRating =>",r),[n,r]}(t,a),i=Object(c.a)(n,2),o=i[0],l=i[1];return r.a.createElement("div",null,r.a.createElement(Y,{title:"Ratings per Decade",categories:a,columnName:"Amount of Ratings",columnData:o,lineName:"Average Rating",lineData:l,width:1200,height:378}))},L=[{name:"Dashboard",icon:"bubble_chart",path:"/",component:function(e){var t=e.ratings,a=t.length;return r.a.createElement("div",null,r.a.createElement("div",{className:"main-component",style:{height:"384px"}},r.a.createElement(j,{ratings:t,ratingsCount:a}),r.a.createElement(O,{ratingsData:I(t),ratingsCount:a})))}},{name:"Ratings",icon:"list",path:"/ratings",component:N},{name:"Time",icon:"calendar_today",path:"/time",component:function(e){var t=e.ratings;return r.a.createElement("div",{className:"main-component"},r.a.createElement(C,{ratings:t}),r.a.createElement(M,{ratings:t}),r.a.createElement(A,{ratings:t}))}}],V=function(){var e,t=Object(n.useState)((e=L,console.log(e),e.find(function(e){var t=window.location.pathname.substr(window.location.pathname.lastIndexOf("/"));return e.path===t}).name)),a=Object(c.a)(t,2),i=a[0],o=a[1];return L?r.a.createElement("div",null,L.map(function(e){return r.a.createElement("div",{key:e.name},r.a.createElement(w.a,{to:"".concat("/imdb-ratings-visualizer").concat(e.path),className:"sidebar-link"},r.a.createElement("div",{className:(t=e.name,i===t?"active-tab":"")},r.a.createElement("div",{onClick:function(){return o(e.name)},className:"sidebar-box"},r.a.createElement("i",{className:"material-icons sidebar-icon"},e.icon),r.a.createElement("span",{className:"sidebar-text"},e.name)))));var t})):"Loading"},W=function(e){var t=e.id,a=e.name,n=e.checked,i=e.onChange;return r.a.createElement("label",{className:"filter-checkbox-label"},r.a.createElement("input",{type:"checkbox",className:"custom-checkbox",value:t,name:a,checked:n,onChange:i}),r.a.createElement("span",{className:"checkmark"}),a)},z=function(e){var t=e.loadedMediaTypes,a=e.filterMovies,i=t.map(function(e){return[e,!0]}),o=Object(n.useState)(1),l=Object(c.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(new Map(i)),p=Object(c.a)(d,2),f=p[0],g=p[1],v=function(e){var t=parseInt(e.target.value),n=e.target.checked;g(f.set(t,n)),u(s+1),a(f)};return r.a.createElement("div",{className:"sidebar"},r.a.createElement(V,null),r.a.createElement("div",null,r.a.createElement("h3",{className:"filter-heading"},"Filter"),f?t.map(function(e){return r.a.createElement(W,{key:e,id:e,name:m[e].name,checked:f.get(e),onChange:v})}):"loading"))},H=a(43),_=a(44);function G(){return(G=Object(u.a)(s.a.mark(function e(t,a,n){var r,i,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=sessionStorage.getItem("ratings"))){e.next=12;break}return e.next=4,JSON.parse(r);case 4:return i=e.sent,e.next=7,J(i);case 7:o=e.sent,t(o),console.log(o),a(sessionStorage.getItem("mediaTypes").split(",").map(function(e){return parseInt(e)})),n(!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(e){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.map(function(e){return e.dateRated=new Date(e.dateRated),e}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var U=function(e,t,a){return G.apply(this,arguments)},$=function(e){var t=e.ratings,a=e.loadedMediaTypes,i=Object(n.useState)(t),o=Object(c.a)(i,2),l=o[0],s=o[1],u=L.map(function(e){var t=e.path,a=e.component,n=e.name;return r.a.createElement(_.a,{exact:!0,path:"".concat("/imdb-ratings-visualizer").concat(t),render:function(){return r.a.createElement(a,{ratings:l})},key:n})});return r.a.createElement("div",null,r.a.createElement(z,{loadedMediaTypes:a,filterMovies:function(e){var a=t.filter(function(t){return!0===e.get(t.mediaTypeId)});s(a)}}),u)},q=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(),l=Object(c.a)(o,2),s=l[0],u=l[1],m=Object(n.useState)(),d=Object(c.a)(m,2),p=d[0],f=d[1];return Object(n.useEffect)(function(){a||U(u,f,i)},[a]),r.a.createElement("div",{className:"App"},r.a.createElement(y,null),r.a.createElement("div",{className:"main-content"},a?r.a.createElement(H.a,null,r.a.createElement($,{ratings:s,loadedMediaTypes:p})):r.a.createElement(E,{setLoaded:i,setRatings:u,setLoadedMediaTypes:f})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.6d73ca09.chunk.js.map